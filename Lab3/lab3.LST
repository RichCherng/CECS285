A51 MACRO ASSEMBLER  LAB3                                                                 03/04/2015 17:25:41 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN lab3.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE lab3.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1                             ORG 000
0000 78C0              2                             mov R0,#11000000b
0002 7E1C              3                             mov R6,#00011100b
0004 750A10            4                             mov 10,#00010000b
0007 750B08            5                             mov 11,#00001000b
000A 750C01            6                             mov 12,#1
000D 755007            7                             mov 50H,#07H
0010 020013            8                             LJMP MAIN
                       9                             
0013                  10     MAIN:           ;LJMP PATTERN1
0013 E580             11                             mov A,P0
0015 54E0             12                             ANL A,#11100000b
0017 F5A0             13                             mov P2,A
0019 11EC             14                             ACALL DELAY
001B B42005           15                             CJNE A,#20H,N1
001E 020065           16                             LJMP PATTERN1
0021 80F0             17                             SJMP MAIN
                      18                             ;CJNE A,#001,N1
                      19                             ;LJMP PATTERN1
                      20                             ;JMP MAIN
                      21                             
0023 F5A0             22     N1:             mov P2,A
0025 B44006           23                     CJNE A,#040H,N2
0028 020089           24                     LJMP PATTERN2
002B 020013           25                     LJMP MAIN
                      26                     
002E F5A0             27     N2:             mov P2,A
0030 B46006           28                     CJNE A,#060H,N3
0033 02009A           29                     LJMP PATTERN3
0036 020013           30                     LJMP MAIN
                      31                     
0039 F5A0             32     N3:             mov P2,A
003B B48006           33                     CJNE A,#080H,N4
003E 0200C8           34                     LJMP PATTERN4
0041 020013           35                     LJMP MAIN
                      36                     
0044 F5A0             37     N4:             mov P2,A
0046 B4A009           38                     CJNE A,#0A0H,N5
0049 7590A0           39                     mov P1,#0A0H
004C 0200DC           40                     LJMP PATTERN5
004F 020013           41                     LJMP MAIN
                      42                     
0052 F5A0             43     N5:             mov P2,A
0054 B4C006           44                     CJNE A,#0C0H,N6
0057 0200E4           45                     LJMP PATTERN6
005A 020013           46                     LJMP MAIN
                      47                     
005D F5A0             48     N6:             mov P2,A
005F 759007           49                     mov P1,#00000111b
0062 020013           50                     LJMP MAIN               
                      51                             
                      52                     
0065 E8               53     PATTERN1:       mov A, R0
0066 B4C004           54                             CJNE A,#11000000b,CHECK ; call check if false
0069 F9               55                             mov R1,A ; indicator to go right
006A 020076           56                             LJMP ROTATE
                      57                             ;ANL A,#11000000b
                      58                             ;JZ  CHANGE
A51 MACRO ASSEMBLER  LAB3                                                                 03/04/2015 17:25:41 PAGE     2

                      59                             
006D E8               60                             CHECK:          mov A,R0
006E B40305           61                                                     CJNE A,#00000011b,ROTATE; Rotate if non of 
                             the condition is met
0071 7900             62                                                     mov R1,#0 ; indicator to go left
0073 020076           63                                                     LJMP ROTATE
                      64                             
0076 E9               65                             ROTATE:         mov A, R1
0077 7008             66                                                     JNZ RROTATE; rotate right
0079 E8               67                                                     mov A, R0
007A 23               68                                                     RL A
007B F8               69                                                     mov R0,A
007C F590             70                                                     mov P1,A
007E 020013           71                                                     LJMP MAIN
                      72                                             
0081 E8               73                             RROTATE:        mov A,R0
0082 03               74                                                     RR A
0083 F8               75                                                     mov R0,A
0084 F590             76                                                     mov P1,A
0086 020013           77                                                     LJMP MAIN
                      78                       
0089 E50A             79     PATTERN2:       mov A,10
008B 23               80                             RL      A
008C F50A             81                             mov 10,A
008E E50B             82                             mov A,11
0090 03               83                             RR      A
0091 F50B             84                             mov 11,A
0093 250A             85                             ADD A,10
0095 F590             86                             mov P1,A
0097 020013           87                             LJMP MAIN
                      88                             
009A                  89     PATTERN3:               
                      90                                     ;Generate random 0-8bits
009A E550             91             RAND:           mov A,50H
009C 7003             92                                     jnz RANDB
009E F4               93                                     cpl A
009F F550             94                                     mov 50H, A
                      95                                             
00A1 54B8             96             RANDB:          ANL A,#10111000b
00A3 A2D0             97                                     mov C, P
00A5 E550             98                                     mov A, 50H
00A7 33               99                                     RLC A
00A8 F550            100                                     mov 50H, A
00AA 8550B0          101                                     mov p3,50H
00AD AF50            102                                     mov R7,50H
                     103                                     ;check for 3 bits
00AF 7900            104                                     mov R1,#00H ;counter couting bit
00B1 7A08            105                                     mov R2,#08H ;counter for 8 loops
00B3 E550            106             CHECKB:         mov A, 50H
00B5 33              107                                     RLC A
00B6 F550            108                                     mov 50H, A
00B8 5001            109                                     JNC Decrement
00BA 09              110                                     INC R1
                     111                                     
                     112                                     ;Decrement loop counter without INC bit counter
00BB                 113             Decrement:      
00BB DAF6            114                                     DJNZ R2, CHECKB
00BD 8F50            115                                     mov 50H,R7
00BF E9              116                                     mov A, R1
                     117                                     ;if random number contain only 3 bit then pass
00C0 B403D7          118                                     CJNE A,#03H,RAND
00C3 8F90            119                                     mov P1, R7
00C5 020013          120                                     LJMP MAIN
                     121                             
00C8                 122     PATTERN4:       
00C8 E50C            123                             mov A, 12
A51 MACRO ASSEMBLER  LAB3                                                                 03/04/2015 17:25:41 PAGE     3

00CA F4              124                             CPL A
00CB F50C            125                             mov 12, A
00CD B4FE06          126                             CJNE A,#11111110b,SHOW
00D0 759055          127                             mov P1,#01010101b
00D3 020013          128                             LJMP MAIN
                     129                             
00D6 7590AA          130                             SHOW:   mov P1,#10101010b
00D9 020013          131                                             LJMP MAIN
                     132                     
00DC 8E90            133     PATTERN5:       mov P1,R6
00DE EE              134                             mov A, R6
00DF 23              135                             RL      A
00E0 FE              136                             mov R6,A
00E1 020013          137                             LJMP MAIN
                     138                             
00E4 8E90            139     PATTERN6:       mov P1,R6
00E6 EE              140                             mov A, R6
00E7 03              141                             RR      A
00E8 FE              142                             mov R6,A
00E9 020013          143                             LJMP MAIN
                     144     
00EC 7D30            145     DELAY: mov r5,#30H
00EE 7CFF            146     lp3:   mov r4,#0FFH
00F0 7BFF            147     lp2:   mov r3,#0FFH
00F2 DBFE            148     lp1:   djnz r3,lp1
00F4 DCFA            149            djnz r4,lp2
00F6 DDF6            150                djnz r5,lp3
00F8 22              151                RET
                     152                
                     153                
*** WARNING #A41 IN 153 (lab3.a51, LINE 153): MISSING 'END' STATEMENT
A51 MACRO ASSEMBLER  LAB3                                                                 03/04/2015 17:25:41 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

CHECK. . . . . . .  C ADDR   006DH   A   
CHECKB . . . . . .  C ADDR   00B3H   A   
DECREMENT. . . . .  C ADDR   00BBH   A   
DELAY. . . . . . .  C ADDR   00ECH   A   
LP1. . . . . . . .  C ADDR   00F2H   A   
LP2. . . . . . . .  C ADDR   00F0H   A   
LP3. . . . . . . .  C ADDR   00EEH   A   
MAIN . . . . . . .  C ADDR   0013H   A   
N1 . . . . . . . .  C ADDR   0023H   A   
N2 . . . . . . . .  C ADDR   002EH   A   
N3 . . . . . . . .  C ADDR   0039H   A   
N4 . . . . . . . .  C ADDR   0044H   A   
N5 . . . . . . . .  C ADDR   0052H   A   
N6 . . . . . . . .  C ADDR   005DH   A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
PATTERN1 . . . . .  C ADDR   0065H   A   
PATTERN2 . . . . .  C ADDR   0089H   A   
PATTERN3 . . . . .  C ADDR   009AH   A   
PATTERN4 . . . . .  C ADDR   00C8H   A   
PATTERN5 . . . . .  C ADDR   00DCH   A   
PATTERN6 . . . . .  C ADDR   00E4H   A   
RAND . . . . . . .  C ADDR   009AH   A   
RANDB. . . . . . .  C ADDR   00A1H   A   
ROTATE . . . . . .  C ADDR   0076H   A   
RROTATE. . . . . .  C ADDR   0081H   A   
SHOW . . . . . . .  C ADDR   00D6H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  1 WARNING(S), 0 ERROR(S)
